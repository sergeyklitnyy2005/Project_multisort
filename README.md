#Внешняя многопоточная сортировка

Проект реализует внешнюю многопоточную сортировку больших бинарных файлов, содержащих int-значения.

Система построена на чистом C с использованием POSIX pthread. Все компоненты реализованы как отдельные .h/.c пары для структурированности и читаемости.

##Архитектура:
```
+----------------------------------------------------+
|                   main.c (FileSorter)              |
|----------------------------------------------------|
| - input_filename                                   |
| - output_filename                                  |
| - max_numbers_in_memory                            |
| - temp_dir                                         |
| - thread_count                                     |
| + main(): точка входа                              |
|   вызывает file_sorter_run()                       |
+----------------------+-----------------------------+
                       |
                       | использует
                       v
+----------------------------------------------------+
|                  file_sorter.c/.h                  |
|----------------------------------------------------|
| + file_sorter_run()                                |
| инициализация: ChunkReader, ThreadSafeQueue        |
| запуск SortWorker-потоков                          |
| управление: чтение чанков, завершение потоков      |
| финальный merge через SortedChunkManager & Merger  |
+----------------------+-----------------------------+
                       |
                       | читает чанки
                       v
+----------------------------------------------------+
|                chunk_reader.c/.h                   |
|----------------------------------------------------|
| - FILE* file                                       |
| - int* buffer                                      |
| - int chunk_size                                   |
| + chunk_reader_init()                              |
| + chunk_reader_has_next()                          |
| + chunk_reader_read_next()                         |
| + chunk_reader_free()                              |
+----------------------+-----------------------------+
                       |
                       | кладёт в очередь
                       v
+----------------------------------------------------+
|         thread_safe_queue.c/.h (generic)           |
|----------------------------------------------------|
| - pthread_mutex_t                                  |
| - pthread_cond_t                                   |
| - queue (ChunkJob*)                                |
| + queue_init()                                     |
| + queue_push()                                     |
| + queue_pop()                                      |
| + queue_close()                                    |
| + queue_destroy()                                  |
+----------------------+-----------------------------+
                       |
                       | потребляют в
                       v
+----------------------------------------------------+
|                sort_worker.c/.h                    |
|----------------------------------------------------|
| + sort_worker_run()                                |
| в потоке: берёт ChunkJob → сортирует → сохраняет   |
| → сообщает SortedChunkManager                      |
+----------------------+-----------------------------+
                       |
                       | регистрируют чанки
                       v
+----------------------------------------------------+
|          sorted_chunk_manager.c/.h                 |
|----------------------------------------------------|
| - массив путей к временным отсортированным файлам  |
| + scm_init(), scm_register_chunk()                 |
| + scm_get_all_chunks()                             |
| + scm_destroy()                                    |
+----------------------+-----------------------------+
                       |
                       | передаёт файлы в
                       v
+----------------------------------------------------+
|                  merger.c/.h                       |
|----------------------------------------------------|
| + merge_chunks()                                   |
| n-way merge файлов в финальный output.bin          |
+----------------------------------------------------+

Дополнительные утилиты:
────────────────────────────────────────────────────────
check_sorted.c         — проверка, отсортирован ли output.bin  
print_first_n.c        — печать первых N чисел из файла       
generate_input.c       — генерация входного файла              

```

Замечание:
Такая архитектура является недопустимой из-за выского риска отказа общей системы. Так как надежность зависит не только от надежности не только конечных it-систем, но и разложению бизнес-систем на отдельные компоненты
##Компиляция:
```
gcc -o generator generate_input.c
./generator input.bin 100
make
./sorter input.bin output.bin temp 100
gcc check_sorted.c -o check_sorted
./check_sorted output.bin
```
Пользователю предлагается ввести количество потоков.

Программа измеряет и выводит общее время сортировки.

##Дополнительные утилиты
###Проверка отсортированности
```
gcc check_sorted.c -o check_sorted
./check_sorted output.bin
```
###Просмотр первых N чисел
```
gcc print_first_n.c -o print_first_n
./print_first_n output.bin 20
```
##Замеры времени
Кол-во потоков	Время (сек)
1	15.2
2	8.1
4	4.3
8	3.9
